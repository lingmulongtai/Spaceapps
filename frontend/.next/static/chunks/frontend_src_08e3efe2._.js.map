{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lingm/Downloads/Spaceapps%20photo/frontend/src/data/datasets.ts"],"sourcesContent":["import type { DatasetDefinition } from \"@/types/datasets\";\r\n\r\nconst GIBS_BASE = \"https://gibs.earthdata.nasa.gov/wmts/epsg3857/all\";\r\n\r\nexport const DATASETS: DatasetDefinition[] = [\r\n  {\r\n    id: \"earth-true-color\",\r\n    name: \"Earth True Color (MODIS)\",\r\n    description:\r\n      \"NASA GIBS MODIS Terra Corrected Reflectance daily imagery at 250m resolution.\",\r\n    category: \"earth\",\r\n    attribution: \"NASA GIBS / Blue Marble\",\r\n    minZoom: 2,\r\n    maxZoom: 9,\r\n    tileSize: 512,\r\n    initialView: { center: [0, 0], zoom: 2 },\r\n    supportsTime: true,\r\n    availableDates: [\r\n      \"2024-10-01\",\r\n      \"2024-09-01\",\r\n      \"2024-08-01\",\r\n      \"2024-07-01\",\r\n    ],\r\n    defaultDate: \"2024-10-01\",\r\n    getTileUrls: ({ date }) => {\r\n      const day = date ?? \"2024-10-01\";\r\n      return [\r\n        `${GIBS_BASE}/MODIS_Terra_CorrectedReflectance_TrueColor/default/${day}/GoogleMapsCompatible_Level9/{z}/{y}/{x}.jpg`,\r\n      ];\r\n    },\r\n  },\r\n  {\r\n    id: \"earth-thermal-night\",\r\n    name: \"Earth Nighttime Thermal\",\r\n    description: \"Suomi NPP VIIRS day/night band highlighting nighttime lights and thermal features.\",\r\n    category: \"earth\",\r\n    attribution: \"NASA GIBS / VIIRS\",\r\n    minZoom: 2,\r\n    maxZoom: 8,\r\n    tileSize: 512,\r\n    initialView: { center: [0, 20], zoom: 2 },\r\n    supportsTime: true,\r\n    availableDates: [\"2024-10-01\", \"2024-09-05\"],\r\n    defaultDate: \"2024-10-01\",\r\n    getTileUrls: ({ date }) => {\r\n      const day = date ?? \"2024-10-01\";\r\n      return [\r\n        `${GIBS_BASE}/VIIRS_SNPP_DayNightBand_ENCC/default/${day}/GoogleMapsCompatible_Level8/{z}/{y}/{x}.jpg`,\r\n      ];\r\n    },\r\n  },\r\n  {\r\n    id: \"mars-mro-marci\",\r\n    name: \"Mars Global Daily Mosaic (MARCI)\",\r\n    description:\r\n      \"Mars Reconnaissance Orbiter MARCI global mosaic taps CTX context color imagery for daily weather tracking.\",\r\n    category: \"mars\",\r\n    attribution: \"NASA / JPL / MSSS\",\r\n    minZoom: 2,\r\n    maxZoom: 7,\r\n    tileSize: 512,\r\n    initialView: { center: [0, 0], zoom: 2 },\r\n    supportsTime: true,\r\n    availableDates: [\"2024-09-15\", \"2024-08-01\"],\r\n    defaultDate: \"2024-09-15\",\r\n    getTileUrls: ({ date }) => {\r\n      const day = date ?? \"2024-09-15\";\r\n      return [`https://mars.nasa.gov/mmgis-maps/MARCI/${day}/{z}/{x}/{y}.jpg`];\r\n    },\r\n  },\r\n  {\r\n    id: \"moon-lro-wac\",\r\n    name: \"Moon LRO WAC Mosaic\",\r\n    description: \"Lunar Reconnaissance Orbiter Wide Angle Camera monochrome global mosaic.\",\r\n    category: \"moon\",\r\n    attribution: \"NASA / GSFC / Arizona State University\",\r\n    minZoom: 2,\r\n    maxZoom: 8,\r\n    tileSize: 512,\r\n    initialView: { center: [0, 0], zoom: 1.5 },\r\n    getTileUrls: () => [\r\n      \"https://trek.nasa.gov/tiles/Moon/EQ/LRO_WAC_Mosaic_Global_303ppd/{z}/{x}/{y}.jpg\",\r\n    ],\r\n    overlays: [\r\n      {\r\n        id: \"moon-dem\",\r\n        name: \"LRO LOLA Elevation\",\r\n        description: \"Laser altimeter-based shaded relief from LOLA.\",\r\n        getTileUrls: () => [\r\n          \"https://trek.nasa.gov/tiles/Moon/EQ/LRO_LOLA_ClrShade_Global_128ppd/{z}/{x}/{y}.png\",\r\n        ],\r\n        opacity: 0.6,\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    id: \"andromeda-hubble\",\r\n    name: \"Andromeda Galaxy (Panchromatic)\",\r\n    description:\r\n      \"2.5 gigapixel panchromatic mosaic of Andromeda (M31) captured by the Hubble Space Telescope (PHAT survey).\",\r\n    category: \"deep-space\",\r\n    attribution: \"NASA / ESA / JHU\",\r\n    minZoom: 0,\r\n    maxZoom: 12,\r\n    tileSize: 512,\r\n    initialView: { center: [0, 0], zoom: 0.5 },\r\n    getTileUrls: () => [\r\n      \"https://www.spacetelescope.org/static/archives/images/newscollection/heic1502a/{z}/{x}/{y}.jpg\",\r\n    ],\r\n  },\r\n];\r\n\r\nexport const DATASET_LOOKUP = new Map(DATASETS.map((dataset) => [dataset.id, dataset]));\r\n\r\n"],"names":[],"mappings":";;;;;;AAEA,MAAM,YAAY;AAEX,MAAM,WAAgC;IAC3C;QACE,IAAI;QACJ,MAAM;QACN,aACE;QACF,UAAU;QACV,aAAa;QACb,SAAS;QACT,SAAS;QACT,UAAU;QACV,aAAa;YAAE,QAAQ;gBAAC;gBAAG;aAAE;YAAE,MAAM;QAAE;QACvC,cAAc;QACd,gBAAgB;YACd;YACA;YACA;YACA;SACD;QACD,aAAa;QACb,aAAa;gBAAC,EAAE,IAAI,EAAE;YACpB,MAAM,MAAM,iBAAA,kBAAA,OAAQ;YACpB,OAAO;gBACJ,GAAkE,OAAhE,WAAU,wDAA0D,OAAJ,KAAI;aACxE;QACH;IACF;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,aAAa;QACb,SAAS;QACT,SAAS;QACT,UAAU;QACV,aAAa;YAAE,QAAQ;gBAAC;gBAAG;aAAG;YAAE,MAAM;QAAE;QACxC,cAAc;QACd,gBAAgB;YAAC;YAAc;SAAa;QAC5C,aAAa;QACb,aAAa;gBAAC,EAAE,IAAI,EAAE;YACpB,MAAM,MAAM,iBAAA,kBAAA,OAAQ;YACpB,OAAO;gBACJ,GAAoD,OAAlD,WAAU,0CAA4C,OAAJ,KAAI;aAC1D;QACH;IACF;IACA;QACE,IAAI;QACJ,MAAM;QACN,aACE;QACF,UAAU;QACV,aAAa;QACb,SAAS;QACT,SAAS;QACT,UAAU;QACV,aAAa;YAAE,QAAQ;gBAAC;gBAAG;aAAE;YAAE,MAAM;QAAE;QACvC,cAAc;QACd,gBAAgB;YAAC;YAAc;SAAa;QAC5C,aAAa;QACb,aAAa;gBAAC,EAAE,IAAI,EAAE;YACpB,MAAM,MAAM,iBAAA,kBAAA,OAAQ;YACpB,OAAO;gBAAE,0CAA6C,OAAJ,KAAI;aAAkB;QAC1E;IACF;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,UAAU;QACV,aAAa;QACb,SAAS;QACT,SAAS;QACT,UAAU;QACV,aAAa;YAAE,QAAQ;gBAAC;gBAAG;aAAE;YAAE,MAAM;QAAI;QACzC,aAAa,IAAM;gBACjB;aACD;QACD,UAAU;YACR;gBACE,IAAI;gBACJ,MAAM;gBACN,aAAa;gBACb,aAAa,IAAM;wBACjB;qBACD;gBACD,SAAS;YACX;SACD;IACH;IACA;QACE,IAAI;QACJ,MAAM;QACN,aACE;QACF,UAAU;QACV,aAAa;QACb,SAAS;QACT,SAAS;QACT,UAAU;QACV,aAAa;YAAE,QAAQ;gBAAC;gBAAG;aAAE;YAAE,MAAM;QAAI;QACzC,aAAa,IAAM;gBACjB;aACD;IACH;CACD;AAEM,MAAM,iBAAiB,IAAI,IAAI,SAAS,GAAG,CAAC,CAAC,UAAY;QAAC,QAAQ,EAAE;QAAE;KAAQ","debugId":null}},
    {"offset": {"line": 167, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lingm/Downloads/Spaceapps%20photo/frontend/src/components/DatasetSidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useMemo, useState } from \"react\";\r\n\r\nimport { DATASETS } from \"@/data/datasets\";\r\n\r\ntype DatasetSidebarProps = {\r\n  selectedId: string;\r\n  onSelect: (datasetId: string) => void;\r\n  className?: string;\r\n  height?: string;\r\n};\r\n\r\nexport function DatasetSidebar({ selectedId, onSelect, className, height }: DatasetSidebarProps) {\r\n  const [query, setQuery] = useState(\"\");\r\n\r\n  const filtered = useMemo(() => {\r\n    const normalized = query.toLowerCase().trim();\r\n    if (!normalized) return DATASETS;\r\n    return DATASETS.filter((dataset) =>\r\n      [dataset.name, dataset.description, dataset.category]\r\n        .filter(Boolean)\r\n        .some((value) => value.toLowerCase().includes(normalized)),\r\n    );\r\n  }, [query]);\r\n\r\n  const containerClasses = [\r\n    \"flex w-full flex-col gap-4 rounded-2xl border border-slate-200 bg-white/90 p-4 text-slate-700 shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70 dark:text-slate-200\",\r\n    height,\r\n    className,\r\n  ]\r\n    .filter(Boolean)\r\n    .join(\" \");\r\n\r\n  return (\r\n    <section\r\n      className={containerClasses}\r\n      aria-label=\"Dataset selection\"\r\n    >\r\n      <header className=\"space-y-1\">\r\n        <h2 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">Explore Datasets</h2>\r\n        <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n          Choose mission layers, deep sky mosaics, or planetary maps.\r\n        </p>\r\n      </header>\r\n\r\n      <label className=\"flex min-h-[44px] items-center gap-3 rounded-xl border border-slate-200 bg-white/65 px-3 py-2 text-sm text-slate-700 shadow-inner focus-within:border-blue-500 focus-within:ring-2 focus-within:ring-blue-200 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-200\">\r\n        <span className=\"text-[11px] uppercase tracking-[0.2em] text-slate-400\">Search</span>\r\n        <input\r\n          type=\"search\"\r\n          placeholder=\"Search datasets...\"\r\n          value={query}\r\n          onChange={(event) => setQuery(event.target.value)}\r\n          className=\"flex-1 border-none bg-transparent text-sm focus:outline-none\"\r\n        />\r\n      </label>\r\n\r\n      <div className=\"scroll-elevated -mx-1 flex-1 overflow-y-auto px-1\">\r\n        <ul className=\"space-y-3 pb-1\">\r\n          {filtered.map((dataset) => {\r\n            const active = dataset.id === selectedId;\r\n            return (\r\n              <li key={dataset.id}>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => onSelect(dataset.id)}\r\n                  className={`w-full rounded-2xl border px-4 py-3 text-left text-sm transition-colors ${\r\n                    active\r\n                      ? \"border-blue-500 bg-blue-500/15 text-blue-100\"\r\n                      : \"border-slate-200 bg-white hover:border-blue-400/80 hover:bg-blue-50 dark:border-slate-800 dark:bg-slate-950 dark:hover:border-blue-400/60 dark:hover:bg-blue-500/15\"\r\n                  }`}\r\n                >\r\n                  <div className=\"flex items-center justify-between gap-3\">\r\n                    <span className=\"font-semibold text-slate-900 dark:text-slate-100\">{dataset.name}</span>\r\n                    <span className=\"rounded-full bg-slate-100 px-2 py-1 text-[10px] uppercase tracking-wide text-slate-600 dark:bg-slate-800 dark:text-slate-300\">\r\n                      {dataset.category}\r\n                    </span>\r\n                  </div>\r\n                  <p className=\"mt-2 text-xs leading-relaxed text-slate-500 dark:text-slate-400\">\r\n                    {dataset.description}\r\n                  </p>\r\n                  <p className=\"mt-2 text-xs text-slate-400 dark:text-slate-500\">{dataset.attribution}</p>\r\n                </button>\r\n              </li>\r\n            );\r\n          })}\r\n        </ul>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default DatasetSidebar;\r\n\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;;;AAJA;;;AAaO,SAAS,eAAe,KAAgE;QAAhE,EAAE,UAAU,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,EAAuB,GAAhE;;IAC7B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qLAAQ,EAAC;IAEnC,MAAM,WAAW,IAAA,oLAAO;4CAAC;YACvB,MAAM,aAAa,MAAM,WAAW,GAAG,IAAI;YAC3C,IAAI,CAAC,YAAY,OAAO,kJAAQ;YAChC,OAAO,kJAAQ,CAAC,MAAM;oDAAC,CAAC,UACtB;wBAAC,QAAQ,IAAI;wBAAE,QAAQ,WAAW;wBAAE,QAAQ,QAAQ;qBAAC,CAClD,MAAM,CAAC,SACP,IAAI;4DAAC,CAAC,QAAU,MAAM,WAAW,GAAG,QAAQ,CAAC;;;QAEpD;2CAAG;QAAC;KAAM;IAEV,MAAM,mBAAmB;QACvB;QACA;QACA;KACD,CACE,MAAM,CAAC,SACP,IAAI,CAAC;IAER,qBACE,yMAAC;QACC,WAAW;QACX,cAAW;;0BAEX,yMAAC;gBAAO,WAAU;;kCAChB,yMAAC;wBAAG,WAAU;kCAA6D;;;;;;kCAC3E,yMAAC;wBAAE,WAAU;kCAA6C;;;;;;;;;;;;0BAK5D,yMAAC;gBAAM,WAAU;;kCACf,yMAAC;wBAAK,WAAU;kCAAwD;;;;;;kCACxE,yMAAC;wBACC,MAAK;wBACL,aAAY;wBACZ,OAAO;wBACP,UAAU,CAAC,QAAU,SAAS,MAAM,MAAM,CAAC,KAAK;wBAChD,WAAU;;;;;;;;;;;;0BAId,yMAAC;gBAAI,WAAU;0BACb,cAAA,yMAAC;oBAAG,WAAU;8BACX,SAAS,GAAG,CAAC,CAAC;wBACb,MAAM,SAAS,QAAQ,EAAE,KAAK;wBAC9B,qBACE,yMAAC;sCACC,cAAA,yMAAC;gCACC,MAAK;gCACL,SAAS,IAAM,SAAS,QAAQ,EAAE;gCAClC,WAAW,AAAC,2EAIX,OAHC,SACI,iDACA;;kDAGN,yMAAC;wCAAI,WAAU;;0DACb,yMAAC;gDAAK,WAAU;0DAAoD,QAAQ,IAAI;;;;;;0DAChF,yMAAC;gDAAK,WAAU;0DACb,QAAQ,QAAQ;;;;;;;;;;;;kDAGrB,yMAAC;wCAAE,WAAU;kDACV,QAAQ,WAAW;;;;;;kDAEtB,yMAAC;wCAAE,WAAU;kDAAmD,QAAQ,WAAW;;;;;;;;;;;;2BAnB9E,QAAQ,EAAE;;;;;oBAuBvB;;;;;;;;;;;;;;;;;AAKV;GA7EgB;KAAA;uCA+ED","debugId":null}},
    {"offset": {"line": 358, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lingm/Downloads/Spaceapps%20photo/frontend/src/components/MapViewport.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useCallback, useEffect, useMemo, useRef, useState } from \"react\";\r\nimport { useLayoutEffect } from \"react\";\r\n\r\nimport maplibregl from \"maplibre-gl\";\r\nimport type { Map as MapLibreMap } from \"maplibre-gl\";\r\nimport \"maplibre-gl/dist/maplibre-gl.css\";\r\n\r\nimport { DATASET_LOOKUP, DATASETS } from \"@/data/datasets\";\r\nimport useTranslations from \"@/hooks/useTranslations\";\r\nimport type { DatasetDefinition } from \"@/types/datasets\";\r\n\r\nexport type MapViewportProps = {\r\n  datasetId?: string;\r\n  previewUrl?: string | null;\r\n  layerName?: string;\r\n  timestamp?: string;\r\n  metadata?: string;\r\n  attribution?: string;\r\n  onDatasetChange?: (dataset: DatasetDefinition) => void;\r\n  className?: string;\r\n  availableDates?: string[];\r\n  onDateChange?: (date: string | undefined) => void;\r\n};\r\n\r\nconst DATASET_SOURCE_PREFIX = \"dataset-source-\";\r\nconst DATASET_LAYER_PREFIX = \"dataset-layer-\";\r\nconst OVERLAY_SOURCE_PREFIX = \"overlay-source-\";\r\nconst OVERLAY_LAYER_PREFIX = \"overlay-layer-\";\r\n\r\nexport function MapViewport({\r\n  datasetId = DATASETS[0]?.id ?? \"earth-true-color\",\r\n  previewUrl,\r\n  layerName,\r\n  timestamp,\r\n  metadata,\r\n  attribution,\r\n  onDatasetChange,\r\n  className,\r\n  availableDates,\r\n  onDateChange,\r\n}: MapViewportProps) {\r\n  const t = useTranslations(\"map\");\r\n  const containerRef = useRef<HTMLDivElement | null>(null);\r\n  const mapRef = useRef<MapLibreMap | null>(null);\r\n\r\n  const [selectedDatasetId, setSelectedDatasetId] = useState(datasetId);\r\n  const [selectedDate, setSelectedDate] = useState<string | undefined>(\r\n    DATASET_LOOKUP.get(datasetId)?.defaultDate,\r\n  );\r\n  const [overlaySelection, setOverlaySelection] = useState<Record<string, boolean>>({});\r\n  const [mapReady, setMapReady] = useState(false);\r\n\r\n  const dataset = useMemo(() => DATASET_LOOKUP.get(selectedDatasetId), [selectedDatasetId]);\r\n\r\n  // initialise map once\r\n  useEffect(() => {\r\n    if (!containerRef.current || mapRef.current) return;\r\n\r\n    const initialDataset = DATASET_LOOKUP.get(datasetId) ?? DATASETS[0];\r\n    const map = new maplibregl.Map({\r\n      container: containerRef.current,\r\n      style: {\r\n        version: 8,\r\n        sources: {},\r\n        layers: [\r\n          {\r\n            id: \"background\",\r\n            type: \"background\",\r\n            paint: { \"background-color\": \"#020617\" },\r\n          },\r\n        ],\r\n      },\r\n      center: initialDataset?.initialView.center ?? [0, 0],\r\n      zoom: initialDataset?.initialView.zoom ?? 2,\r\n      minZoom: initialDataset?.minZoom ?? 0,\r\n      maxZoom: initialDataset?.maxZoom ?? 14,\r\n      attributionControl: true,\r\n    });\r\n\r\n    const handleLoad = () => setMapReady(true);\r\n    map.on(\"load\", handleLoad);\r\n    mapRef.current = map;\r\n\r\n    return () => {\r\n      map.off(\"load\", handleLoad);\r\n      map.remove();\r\n      mapRef.current = null;\r\n    };\r\n  }, [datasetId]);\r\n\r\n  // update overlay defaults when dataset changes\r\n  useEffect(() => {\r\n    if (!dataset) return;\r\n    const defaultDate = dataset.defaultDate ?? availableDates?.[0];\r\n    setSelectedDate(defaultDate);\r\n    setOverlaySelection(\r\n      Object.fromEntries(dataset.overlays?.map((overlay) => [overlay.id, true]) ?? []),\r\n    );\r\n    onDatasetChange?.(dataset);\r\n    onDateChange?.(defaultDate);\r\n    if (mapRef.current) {\r\n      mapRef.current.setMinZoom(dataset.minZoom ?? 0);\r\n      mapRef.current.setMaxZoom(dataset.maxZoom ?? 22);\r\n    }\r\n  }, [dataset, onDatasetChange, availableDates, onDateChange]);\r\n\r\n  const clearDatasetLayers = useCallback((map: MapLibreMap) => {\r\n    const style = map.getStyle();\r\n    if (!style) return;\r\n\r\n    style.layers\r\n      ?.map((layer) => layer.id)\r\n      .filter((id: string) => id.startsWith(DATASET_LAYER_PREFIX) || id.startsWith(OVERLAY_LAYER_PREFIX))\r\n      .forEach((layerId: string) => {\r\n        if (map.getLayer(layerId)) {\r\n          map.removeLayer(layerId);\r\n        }\r\n      });\r\n\r\n    Object.keys(style.sources ?? {})\r\n      .filter((id: string) => id.startsWith(DATASET_SOURCE_PREFIX) || id.startsWith(OVERLAY_SOURCE_PREFIX))\r\n      .forEach((sourceId: string) => {\r\n        if (map.getSource(sourceId)) {\r\n          map.removeSource(sourceId);\r\n        }\r\n      });\r\n  }, []);\r\n\r\n  const applyDatasetToMap = useCallback(\r\n    (map: MapLibreMap, targetDataset: DatasetDefinition, date?: string) => {\r\n      const tileUrls = targetDataset.getTileUrls({ date });\r\n      const sourceId = `${DATASET_SOURCE_PREFIX}${targetDataset.id}`;\r\n      const layerId = `${DATASET_LAYER_PREFIX}${targetDataset.id}`;\r\n\r\n      map.addSource(sourceId, {\r\n        type: \"raster\",\r\n        tiles: tileUrls,\r\n        tileSize: targetDataset.tileSize ?? 256,\r\n        minzoom: targetDataset.minZoom,\r\n        maxzoom: targetDataset.maxZoom,\r\n        scheme: \"xyz\",\r\n      });\r\n\r\n      map.addLayer({\r\n        id: layerId,\r\n        type: \"raster\",\r\n        source: sourceId,\r\n        paint: {\r\n          \"raster-opacity\": 0.85,\r\n        },\r\n        minzoom: targetDataset.minZoom,\r\n        maxzoom: targetDataset.maxZoom,\r\n      });\r\n\r\n      targetDataset.overlays\r\n        ?.filter((overlay) => overlaySelection[overlay.id] ?? true)\r\n        .forEach((overlay) => {\r\n          const overlaySource = `${OVERLAY_SOURCE_PREFIX}${targetDataset.id}-${overlay.id}`;\r\n          const overlayLayer = `${OVERLAY_LAYER_PREFIX}${targetDataset.id}-${overlay.id}`;\r\n\r\n          map.addSource(overlaySource, {\r\n            type: \"raster\",\r\n            tiles: overlay.getTileUrls({ date }),\r\n            tileSize: targetDataset.tileSize ?? 256,\r\n            minzoom: targetDataset.minZoom,\r\n            maxzoom: targetDataset.maxZoom,\r\n            scheme: \"xyz\",\r\n          });\r\n\r\n          map.addLayer({\r\n            id: overlayLayer,\r\n            type: \"raster\",\r\n            source: overlaySource,\r\n            paint: {\r\n              \"raster-opacity\": overlay.opacity ?? 0.6,\r\n            },\r\n            minzoom: targetDataset.minZoom,\r\n            maxzoom: targetDataset.maxZoom,\r\n          });\r\n        });\r\n    },\r\n    [overlaySelection],\r\n  );\r\n\r\n  // refresh map when dataset/time/overlay changes\r\n  useEffect(() => {\r\n    const map = mapRef.current;\r\n    if (!map || !dataset) return;\r\n\r\n    const refresh = () => {\r\n      clearDatasetLayers(map);\r\n      applyDatasetToMap(map, dataset, selectedDate);\r\n      if (dataset.initialView) {\r\n        map.easeTo({ center: dataset.initialView.center, zoom: dataset.initialView.zoom, duration: 500 });\r\n      }\r\n    };\r\n\r\n    if (mapReady) {\r\n      refresh();\r\n    } else {\r\n      map.once(\"load\", refresh);\r\n    }\r\n  }, [dataset, selectedDate, overlaySelection, mapReady, clearDatasetLayers, applyDatasetToMap]);\r\n\r\n  useLayoutEffect(() => {\r\n    if (!mapReady || !mapRef.current) return;\r\n    mapRef.current.resize();\r\n  }, [mapReady]);\r\n\r\n  useEffect(() => {\r\n    if (!mapReady || !containerRef.current || !mapRef.current) return;\r\n    const map = mapRef.current;\r\n    const observer = new ResizeObserver(() => {\r\n      map.resize();\r\n    });\r\n    observer.observe(containerRef.current);\r\n\r\n    return () => observer.disconnect();\r\n  }, [mapReady]);\r\n\r\n  const infoItems = useMemo(() => {\r\n    return [\r\n      layerName ? `${t.layerPrefix}: ${layerName}` : dataset?.name ?? null,\r\n      timestamp\r\n        ? `${t.timePrefix}: ${new Date(timestamp).toUTCString()}`\r\n        : dataset?.supportsTime\r\n        ? `${t.timePrefix}: ${selectedDate ?? dataset?.defaultDate ?? \"\"}`\r\n        : null,\r\n      metadata ? `${t.metadataPrefix}: ${metadata}` : dataset?.description ?? null,\r\n    ].filter((item): item is string => Boolean(item));\r\n  }, [\r\n    dataset?.name,\r\n    dataset?.description,\r\n    dataset?.supportsTime,\r\n    dataset?.defaultDate,\r\n    selectedDate,\r\n    layerName,\r\n    timestamp,\r\n    metadata,\r\n    t,\r\n  ]);\r\n\r\n  const handleDatasetSelect = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n    setSelectedDatasetId(event.target.value);\r\n  };\r\n\r\n  const handleDateChange = (event: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const value = event.target.value || undefined;\r\n    setSelectedDate(value);\r\n    onDateChange?.(value);\r\n  };\r\n\r\n  const handleOverlayToggle = (overlayId: string) => {\r\n    setOverlaySelection((prev) => ({ ...prev, [overlayId]: !prev[overlayId] }));\r\n  };\r\n\r\n  const defaultHeightClasses = className ? \"\" : \"h-[520px] md:h-[580px] lg:h-[640px]\";\r\n  const containerClasses = [\r\n    \"relative flex flex-1 flex-col overflow-hidden rounded-3xl border border-slate-900/30 bg-slate-950 text-slate-100 shadow-xl shadow-slate-900/40\",\r\n    defaultHeightClasses,\r\n    className,\r\n  ]\r\n    .filter(Boolean)\r\n    .join(\" \");\r\n\r\n  return (\r\n    <section className={containerClasses}>\r\n      <div className=\"relative z-20 flex flex-wrap items-center justify-between gap-3 border-b border-white/10 bg-slate-950/85 px-4 py-3 text-xs backdrop-blur\">\r\n        <div className=\"flex flex-wrap items-center gap-4\">\r\n          <label className=\"flex items-center gap-2\">\r\n            <span className=\"text-[10px] uppercase tracking-[0.24em] text-slate-400\">Dataset</span>\r\n            <select\r\n              className=\"rounded-lg border border-white/20 bg-slate-900 px-2 py-1.5 text-xs text-slate-100 shadow-sm outline-none transition focus:border-blue-400 focus:ring-2 focus:ring-blue-500/40\"\r\n              value={selectedDatasetId}\r\n              onChange={handleDatasetSelect}\r\n            >\r\n              {DATASETS.map((item) => (\r\n                <option key={item.id} value={item.id}>\r\n                  {item.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </label>\r\n          {(dataset?.supportsTime || availableDates) && (\r\n            <label className=\"flex items-center gap-2\">\r\n              <span className=\"text-[10px] uppercase tracking-[0.24em] text-slate-400\">Date</span>\r\n              <select\r\n                className=\"rounded-lg border border-white/20 bg-slate-900 px-2 py-1.5 text-xs text-slate-100 shadow-sm outline-none transition focus:border-blue-400 focus:ring-2 focus:ring-blue-500/40\"\r\n                value={selectedDate ?? \"\"}\r\n                onChange={handleDateChange}\r\n              >\r\n                {(availableDates ?? dataset?.availableDates ?? []).map((date) => (\r\n                  <option key={date} value={date}>\r\n                    {date}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </label>\r\n          )}\r\n        </div>\r\n        {dataset?.overlays && dataset.overlays.length > 0 && (\r\n          <div className=\"flex flex-wrap items-center gap-2 text-[11px] text-slate-300\">\r\n            <span className=\"text-[10px] uppercase tracking-[0.24em] text-slate-400\">Overlays</span>\r\n            {dataset.overlays.map((overlay) => (\r\n              <label key={overlay.id} className=\"flex items-center gap-1 rounded-lg border border-white/10 bg-white/5 px-2 py-1 backdrop-blur\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"h-3.5 w-3.5 rounded border-white/30 bg-slate-900 text-blue-500 focus:ring-blue-400\"\r\n                  checked={overlaySelection[overlay.id] ?? true}\r\n                  onChange={() => handleOverlayToggle(overlay.id)}\r\n                />\r\n                <span className=\"text-[11px]\">{overlay.name}</span>\r\n              </label>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"relative flex-1\">\r\n        <div ref={containerRef} className=\"h-full w-full\" />\r\n        {previewUrl && (\r\n          <div className=\"pointer-events-none absolute inset-0\">\r\n            <picture>\r\n              <img src={previewUrl} alt={layerName ?? \"Imagery preview\"} className=\"h-full w-full object-cover\" />\r\n            </picture>\r\n          </div>\r\n        )}\r\n        <div className=\"pointer-events-none absolute inset-x-0 bottom-0 z-20 bg-gradient-to-t from-slate-950/90 via-slate-950/10 to-transparent px-5 pb-4 pt-8\">\r\n          <div className=\"pointer-events-auto flex flex-col gap-2 rounded-2xl border border-white/15 bg-white/5 p-4 text-[12px] text-slate-200 backdrop-blur\">\r\n            <div className=\"flex items-start gap-3\">\r\n              <div>\r\n                <p className=\"text-[10px] uppercase tracking-[0.4em] text-slate-400\">{t.badge}</p>\r\n                <h2 className=\"text-lg font-semibold\">{dataset?.name ?? t.headingFallback}</h2>\r\n              </div>\r\n              {attribution || dataset?.attribution ? (\r\n                <span className=\"ml-auto rounded-full border border-white/10 bg-slate-900/80 px-3 py-1 text-[9px] uppercase tracking-[0.28em] text-slate-300\">\r\n                  {attribution ?? dataset?.attribution}\r\n                </span>\r\n              ) : null}\r\n            </div>\r\n            <ul className=\"space-y-1 text-slate-300\">\r\n              {infoItems.map((item) => (\r\n                <li key={item} className=\"flex items-start gap-3\">\r\n                  <span className=\"mt-1 inline-flex h-2 w-2 flex-shrink-0 rounded-full bg-blue-400\" />\r\n                  <span>{item}</span>\r\n                </li>\r\n              ))}\r\n              {dataset?.description && !metadata && (\r\n                <li className=\"text-[11px] text-slate-400\">{dataset.description}</li>\r\n              )}\r\n            </ul>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default MapViewport;\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 964, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lingm/Downloads/Spaceapps%20photo/frontend/src/components/annotation/AnnotationPanel.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nimport type { Annotation } from \"@/types/annotation\";\r\nimport type { DatasetDefinition } from \"@/types/datasets\";\r\n\r\ntype AnnotationPanelProps = {\r\n  dataset?: DatasetDefinition;\r\n  annotations: Annotation[];\r\n  onAdd: (annotation: Annotation) => void;\r\n  onSelect?: (annotation: Annotation) => void;\r\n  className?: string;\r\n};\r\n\r\nexport function AnnotationPanel({ dataset, annotations, onAdd, onSelect, className }: AnnotationPanelProps) {\r\n  const [title, setTitle] = useState(\"\");\r\n  const [description, setDescription] = useState(\"\");\r\n  const [lat, setLat] = useState(\"0\");\r\n  const [lon, setLon] = useState(\"0\");\r\n\r\n  const handleSubmit = (event: React.FormEvent<HTMLFormElement>) => {\r\n    event.preventDefault();\r\n    if (!dataset) return;\r\n\r\n    onAdd({\r\n      id: `annotation-${Date.now()}`,\r\n      title: title.trim() || `Marker ${annotations.length + 1}`,\r\n      description: description.trim() || undefined,\r\n      coordinates: {\r\n        lat: Number.parseFloat(lat) || 0,\r\n        lon: Number.parseFloat(lon) || 0,\r\n      },\r\n      datasetId: dataset.id,\r\n    });\r\n\r\n    setTitle(\"\");\r\n    setDescription(\"\");\r\n    setLat(\"0\");\r\n    setLon(\"0\");\r\n  };\r\n\r\n  const baseClasses =\r\n    \"flex h-full w-full flex-col gap-4 rounded-2xl border border-slate-200 bg-white/90 p-5 text-slate-700 shadow-sm backdrop-blur dark:border-slate-800 dark:bg-slate-900/70 dark:text-slate-200\";\r\n  const containerClasses = [baseClasses, className ? \"\" : \"min-h-[360px]\", className]\r\n    .filter(Boolean)\r\n    .join(\" \");\r\n\r\n  return (\r\n    <section className={containerClasses} aria-label=\"Annotations\">\r\n      <header className=\"space-y-1\">\r\n        <h2 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">Annotations</h2>\r\n        <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n          Tag interesting features, patterns, or events for this dataset.\r\n        </p>\r\n      </header>\r\n\r\n      <form className=\"grid gap-2 text-sm\" onSubmit={handleSubmit}>\r\n        <label className=\"grid min-w-0 gap-1\">\r\n          <span className=\"text-[11px] uppercase tracking-[0.24em] text-slate-400\">Title</span>\r\n          <input\r\n            value={title}\r\n            onChange={(event) => setTitle(event.target.value)}\r\n            placeholder=\"Aurora filament, crater rim, etc.\"\r\n            className=\"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100\"\r\n          />\r\n        </label>\r\n\r\n        <label className=\"grid min-w-0 gap-1 text-xs\">\r\n          <span className=\"text-[11px] uppercase tracking-[0.24em] text-slate-400\">Description</span>\r\n          <textarea\r\n            value={description}\r\n            onChange={(event) => setDescription(event.target.value)}\r\n            placeholder=\"Observation notes, scientific context, or hypotheses\"\r\n            className=\"min-h-[80px] w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100\"\r\n          />\r\n        </label>\r\n\r\n        <div className=\"grid grid-cols-1 gap-2 sm:grid-cols-2\">\r\n          <label className=\"grid min-w-0 gap-1\">\r\n            <span className=\"text-[11px] uppercase tracking-[0.24em] text-slate-400\">Latitude</span>\r\n            <input\r\n              value={lat}\r\n              onChange={(event) => setLat(event.target.value)}\r\n              className=\"w-full rounded-lg border border-slate-200 bg-white px-2 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100\"\r\n            />\r\n          </label>\r\n          <label className=\"grid min-w-0 gap-1\">\r\n            <span className=\"text-[11px] uppercase tracking-[0.24em] text-slate-400\">Longitude</span>\r\n            <input\r\n              value={lon}\r\n              onChange={(event) => setLon(event.target.value)}\r\n              className=\"w-full rounded-lg border border-slate-200 bg-white px-2 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100\"\r\n            />\r\n          </label>\r\n        </div>\r\n\r\n        <button\r\n          type=\"submit\"\r\n          disabled={!dataset}\r\n          className=\"mt-3 inline-flex items-center justify-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow transition-colors hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 disabled:cursor-not-allowed disabled:bg-blue-400\"\r\n        >\r\n          Add annotation\r\n        </button>\r\n      </form>\r\n\r\n      <div className=\"flex-1 overflow-y-auto pr-1 text-sm\">\r\n        <ul className=\"space-y-3\">\r\n          {annotations\r\n            .filter((annotation) => annotation.datasetId === dataset?.id)\r\n            .map((annotation) => (\r\n              <li key={annotation.id}>\r\n                <button\r\n                  type=\"button\"\r\n                  onClick={() => onSelect?.(annotation)}\r\n                  className=\"w-full rounded-xl border border-slate-200 bg-white p-3 text-left shadow-sm transition hover:border-blue-400/80 hover:bg-blue-50 dark:border-slate-800 dark:bg-slate-950 dark:hover:border-blue-400/60 dark:hover:bg-blue-500/15\"\r\n                >\r\n                  <div className=\"flex items-center justify-between gap-3\">\r\n                    <span className=\"font-semibold text-slate-900 dark:text-slate-100\">{annotation.title}</span>\r\n                    <span className=\"text-[10px] uppercase tracking-wide text-slate-500 dark:text-slate-400\">\r\n                      {annotation.coordinates.lat.toFixed(2)}, {annotation.coordinates.lon.toFixed(2)}\r\n                    </span>\r\n                  </div>\r\n                  {annotation.description && (\r\n                    <p className=\"mt-2 text-xs text-slate-500 dark:text-slate-400\">{annotation.description}</p>\r\n                  )}\r\n                  {annotation.timestamp && (\r\n                    <p className=\"mt-2 text-[11px] text-slate-400\">{annotation.timestamp}</p>\r\n                  )}\r\n                </button>\r\n              </li>\r\n            ))}\r\n        </ul>\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default AnnotationPanel;\r\n\r\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAeO,SAAS,gBAAgB,KAA0E;QAA1E,EAAE,OAAO,EAAE,WAAW,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAwB,GAA1E;;IAC9B,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qLAAQ,EAAC;IACnC,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,qLAAQ,EAAC;IAC/C,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,qLAAQ,EAAC;IAC/B,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,qLAAQ,EAAC;IAE/B,MAAM,eAAe,CAAC;QACpB,MAAM,cAAc;QACpB,IAAI,CAAC,SAAS;QAEd,MAAM;YACJ,IAAI,AAAC,cAAwB,OAAX,KAAK,GAAG;YAC1B,OAAO,MAAM,IAAI,MAAM,AAAC,UAAgC,OAAvB,YAAY,MAAM,GAAG;YACtD,aAAa,YAAY,IAAI,MAAM;YACnC,aAAa;gBACX,KAAK,OAAO,UAAU,CAAC,QAAQ;gBAC/B,KAAK,OAAO,UAAU,CAAC,QAAQ;YACjC;YACA,WAAW,QAAQ,EAAE;QACvB;QAEA,SAAS;QACT,eAAe;QACf,OAAO;QACP,OAAO;IACT;IAEA,MAAM,cACJ;IACF,MAAM,mBAAmB;QAAC;QAAa,YAAY,KAAK;QAAiB;KAAU,CAChF,MAAM,CAAC,SACP,IAAI,CAAC;IAER,qBACE,yMAAC;QAAQ,WAAW;QAAkB,cAAW;;0BAC/C,yMAAC;gBAAO,WAAU;;kCAChB,yMAAC;wBAAG,WAAU;kCAA6D;;;;;;kCAC3E,yMAAC;wBAAE,WAAU;kCAA6C;;;;;;;;;;;;0BAK5D,yMAAC;gBAAK,WAAU;gBAAqB,UAAU;;kCAC7C,yMAAC;wBAAM,WAAU;;0CACf,yMAAC;gCAAK,WAAU;0CAAyD;;;;;;0CACzE,yMAAC;gCACC,OAAO;gCACP,UAAU,CAAC,QAAU,SAAS,MAAM,MAAM,CAAC,KAAK;gCAChD,aAAY;gCACZ,WAAU;;;;;;;;;;;;kCAId,yMAAC;wBAAM,WAAU;;0CACf,yMAAC;gCAAK,WAAU;0CAAyD;;;;;;0CACzE,yMAAC;gCACC,OAAO;gCACP,UAAU,CAAC,QAAU,eAAe,MAAM,MAAM,CAAC,KAAK;gCACtD,aAAY;gCACZ,WAAU;;;;;;;;;;;;kCAId,yMAAC;wBAAI,WAAU;;0CACb,yMAAC;gCAAM,WAAU;;kDACf,yMAAC;wCAAK,WAAU;kDAAyD;;;;;;kDACzE,yMAAC;wCACC,OAAO;wCACP,UAAU,CAAC,QAAU,OAAO,MAAM,MAAM,CAAC,KAAK;wCAC9C,WAAU;;;;;;;;;;;;0CAGd,yMAAC;gCAAM,WAAU;;kDACf,yMAAC;wCAAK,WAAU;kDAAyD;;;;;;kDACzE,yMAAC;wCACC,OAAO;wCACP,UAAU,CAAC,QAAU,OAAO,MAAM,MAAM,CAAC,KAAK;wCAC9C,WAAU;;;;;;;;;;;;;;;;;;kCAKhB,yMAAC;wBACC,MAAK;wBACL,UAAU,CAAC;wBACX,WAAU;kCACX;;;;;;;;;;;;0BAKH,yMAAC;gBAAI,WAAU;0BACb,cAAA,yMAAC;oBAAG,WAAU;8BACX,YACE,MAAM,CAAC,CAAC,aAAe,WAAW,SAAS,MAAK,oBAAA,8BAAA,QAAS,EAAE,GAC3D,GAAG,CAAC,CAAC,2BACJ,yMAAC;sCACC,cAAA,yMAAC;gCACC,MAAK;gCACL,SAAS,IAAM,qBAAA,+BAAA,SAAW;gCAC1B,WAAU;;kDAEV,yMAAC;wCAAI,WAAU;;0DACb,yMAAC;gDAAK,WAAU;0DAAoD,WAAW,KAAK;;;;;;0DACpF,yMAAC;gDAAK,WAAU;;oDACb,WAAW,WAAW,CAAC,GAAG,CAAC,OAAO,CAAC;oDAAG;oDAAG,WAAW,WAAW,CAAC,GAAG,CAAC,OAAO,CAAC;;;;;;;;;;;;;oCAGhF,WAAW,WAAW,kBACrB,yMAAC;wCAAE,WAAU;kDAAmD,WAAW,WAAW;;;;;;oCAEvF,WAAW,SAAS,kBACnB,yMAAC;wCAAE,WAAU;kDAAmC,WAAW,SAAS;;;;;;;;;;;;2BAhBjE,WAAW,EAAE;;;;;;;;;;;;;;;;;;;;;AAyBpC;GAzHgB;KAAA;uCA2HD","debugId":null}},
    {"offset": {"line": 1266, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lingm/Downloads/Spaceapps%20photo/frontend/src/components/annotation/index.ts"],"sourcesContent":["export type { Annotation } from \"@/types/annotation\";\r\nexport { AnnotationPanel } from \"./AnnotationPanel\";\r\n\r\n"],"names":[],"mappings":";AACA","debugId":null}},
    {"offset": {"line": 1276, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lingm/Downloads/Spaceapps%20photo/frontend/src/hooks/useTranslation.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\ntype TranslationPayload = {\r\n  text: string;\r\n  target_language: string;\r\n};\r\n\r\ntype TranslationResult = {\r\n  provider: string;\r\n  text: string;\r\n  target_language: string;\r\n  status: string;\r\n  note?: string | null;\r\n  detected_source_language?: string | null;\r\n};\r\n\r\nexport default function useTranslation() {\r\n  const [result, setResult] = useState<TranslationResult | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const requestTranslation = async (payload: TranslationPayload) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const response = await fetch(\"/api/translate\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(payload),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const message = await response.text();\r\n        throw new Error(message || \"Translation request failed\");\r\n      }\r\n\r\n      const data = (await response.json()) as TranslationResult;\r\n\r\n      if (data.status !== \"success\") {\r\n        setError(data.note ?? \"Translation failed\");\r\n      }\r\n\r\n      setResult(data);\r\n    } catch (err) {\r\n      setError(err instanceof Error ? err.message : \"Unknown error\");\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    result,\r\n    isLoading,\r\n    error,\r\n    requestTranslation,\r\n  };\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAkBe,SAAS;;IACtB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,qLAAQ,EAA2B;IAC/D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qLAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qLAAQ,EAAgB;IAElD,MAAM,qBAAqB,OAAO;QAChC,aAAa;QACb,SAAS;QAET,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,kBAAkB;gBAC7C,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,UAAU,MAAM,SAAS,IAAI;gBACnC,MAAM,IAAI,MAAM,WAAW;YAC7B;YAEA,MAAM,OAAQ,MAAM,SAAS,IAAI;YAEjC,IAAI,KAAK,MAAM,KAAK,WAAW;oBACpB;gBAAT,SAAS,CAAA,aAAA,KAAK,IAAI,cAAT,wBAAA,aAAa;YACxB;YAEA,UAAU;QACZ,EAAE,OAAO,KAAK;YACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,aAAa;QACf;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;IACF;AACF;GAzCwB","debugId":null}},
    {"offset": {"line": 1331, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lingm/Downloads/Spaceapps%20photo/frontend/src/components/TranslationWidget.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useMemo, useState } from \"react\";\r\n\r\nimport useTranslation from \"@/hooks/useTranslation\";\r\nimport useTranslations from \"@/hooks/useTranslations\";\r\n\r\nconst LANGUAGE_OPTIONS = [\r\n  { value: \"EN\", label: \"English\" },\r\n  { value: \"JA\", label: \"日本語\" },\r\n  { value: \"FR\", label: \"Français\" },\r\n  { value: \"DE\", label: \"Deutsch\" },\r\n  { value: \"ES\", label: \"Español\" },\r\n];\r\n\r\nexport default function TranslationWidget() {\r\n  const [text, setText] = useState(\"\");\r\n  const [targetLanguage, setTargetLanguage] = useState(\"EN\");\r\n  const { result, isLoading, error, requestTranslation } = useTranslation();\r\n  const t = useTranslations(\"translationWidget\");\r\n  const [buttonAnimation, setButtonAnimation] = useState<\"idle\" | \"press\" | \"release\">(\"idle\");\r\n\r\n  useEffect(() => {\r\n    const textarea = document.getElementById(\"translation-textarea\");\r\n    if (textarea) {\r\n      textarea.setAttribute(\"aria-label\", t.sourceLabel);\r\n    }\r\n  }, [t.sourceLabel]);\r\n\r\n  const handleTranslate = async () => {\r\n    if (!text.trim()) return;\r\n    setButtonAnimation(\"press\");\r\n    await requestTranslation({ text, target_language: targetLanguage });\r\n    setButtonAnimation(\"release\");\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (buttonAnimation === \"release\") {\r\n      const timeout = window.setTimeout(() => setButtonAnimation(\"idle\"), 500);\r\n      return () => window.clearTimeout(timeout);\r\n    }\r\n  }, [buttonAnimation]);\r\n\r\n  const iconPath = useMemo(() => {\r\n    return buttonAnimation === \"press\"\r\n      ? \"M12 3.25a8.75 8.75 0 1 0 8.75 8.75A8.76 8.76 0 0 0 12 3.25Zm0 15a6.25 6.25 0 1 1 6.25-6.25A6.26 6.26 0 0 1 12 18.25Zm0-10.5a4.25 4.25 0 0 0-3.39 6.77l-1.68 1.68a.75.75 0 0 0 1.06 1.06l1.68-1.68A4.25 4.25 0 1 0 12 7.75Zm0 6.5a2.25 2.25 0 1 1 2.25-2.25A2.25 2.25 0 0 1 12 14.25Z\"\r\n      : \"M12 2a10 10 0 1 0 5.7 18.19l1.74 1.74a.75.75 0 0 0 1.06-1.06l-1.74-1.74A10 10 0 0 0 12 2Zm0 18.5a8.5 8.5 0 1 1 5.15-15.33.75.75 0 0 0 .09.9l1.21 1.21A8.5 8.5 0 0 1 12 20.5Zm4-8.5a4 4 0 1 1-4-4 .75.75 0 0 0 0-1.5 5.5 5.5 0 1 0 5.5 5.5.75.75 0 0 0-1.5 0Z\";\r\n  }, [buttonAnimation]);\r\n\r\n  return (\r\n    <section className=\"grid gap-4 rounded-lg border border-slate-200 bg-white/80 p-4 text-sm text-slate-600 shadow-sm backdrop-blur-md dark:border-slate-800 dark:bg-slate-900/70 dark:text-slate-300\">\r\n      <header className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">\r\n            {t.title}\r\n          </h2>\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n            {t.subtitle}\r\n          </p>\r\n        </div>\r\n      </header>\r\n\r\n      <label className=\"grid gap-1 text-xs uppercase tracking-widest text-slate-500 dark:text-slate-400\">\r\n        {t.sourceLabel}\r\n        <textarea\r\n          id=\"translation-textarea\"\r\n          className=\"min-h-[120px] rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100\"\r\n          value={text}\r\n          onChange={(event) => setText(event.target.value)}\r\n          placeholder={t.placeholder}\r\n        />\r\n      </label>\r\n\r\n      <div className=\"flex flex-wrap items-center gap-3\">\r\n        <label className=\"flex flex-col text-xs uppercase tracking-widest text-slate-500 dark:text-slate-400\">\r\n          {t.targetLabel}\r\n          <select\r\n            className=\"mt-1 rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100\"\r\n            value={targetLanguage}\r\n            onChange={(event) => setTargetLanguage(event.target.value)}\r\n          >\r\n            {LANGUAGE_OPTIONS.map((option) => (\r\n              <option key={option.value} value={option.value}>\r\n                {option.label}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n\r\n        <button\r\n          type=\"button\"\r\n          className={`ml-auto inline-flex items-center gap-3 rounded-2xl border border-blue-400/70 bg-gradient-to-r from-blue-600 via-cyan-500 to-blue-500 px-5 py-2 text-sm font-semibold text-white shadow-lg shadow-blue-500/30 transition-all focus:outline-none focus:ring-2 focus:ring-blue-200 disabled:cursor-not-allowed disabled:border-blue-300 disabled:bg-slate-400/60 disabled:text-slate-200 ${\r\n            buttonAnimation === \"press\" ? \"translate-press-animate\" : buttonAnimation === \"release\" ? \"translate-release-animate\" : \"hover:scale-[1.02] hover:shadow-blue-400/50\"\r\n          }`}\r\n          onClick={handleTranslate}\r\n          onAnimationEnd={(event) => {\r\n            if (event.animationName.includes(\"press\") && buttonAnimation === \"press\") {\r\n              setButtonAnimation(\"release\");\r\n            }\r\n            if (event.animationName.includes(\"release\") && buttonAnimation === \"release\") {\r\n              setButtonAnimation(\"idle\");\r\n            }\r\n          }}\r\n          disabled={isLoading || !text.trim()}\r\n        >\r\n          <span\r\n            className=\"relative inline-flex h-8 w-8 items-center justify-center rounded-full border border-white/40 bg-white/20 shadow-inner shadow-white/30 backdrop-blur transition-transform duration-300\"\r\n          >\r\n            <svg\r\n              className={`h-4 w-4 text-white transition-transform duration-300 ${buttonAnimation === \"press\" ? \"rotate-180\" : buttonAnimation === \"release\" ? \"rotate-0\" : \"\"}`}\r\n              viewBox=\"0 0 24 24\"\r\n              fill=\"currentColor\"\r\n              aria-hidden=\"true\"\r\n            >\r\n              <path d={iconPath} />\r\n            </svg>\r\n          </span>\r\n          <span>{isLoading ? t.buttonLoading : t.button}</span>\r\n          <span className=\"inline-flex h-2 w-8 items-center justify-end gap-1\">\r\n            <span className=\"h-2 w-2 rounded-full bg-white/90 shadow\" />\r\n            <span className=\"h-2 w-2 rounded-full bg-white/60 shadow\" />\r\n          </span>\r\n        </button>\r\n      </div>\r\n\r\n      {error && (\r\n        <p className=\"rounded-md border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-700 dark:border-red-900/50 dark:bg-red-900/30 dark:text-red-200\">\r\n          {error}\r\n        </p>\r\n      )}\r\n\r\n      {result && (\r\n        <div className=\"grid gap-2 rounded-md border border-slate-200 bg-white/70 p-3 text-xs text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-900/60 dark:text-slate-300\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <span className=\"font-semibold text-slate-900 dark:text-slate-100\">{result.target_language}</span>\r\n            <span className=\"rounded bg-slate-200 px-2 py-1 text-[10px] font-semibold uppercase tracking-widest text-slate-600 dark:bg-slate-800 dark:text-slate-300\">\r\n              {result.provider}\r\n            </span>\r\n          </div>\r\n          {result.detected_source_language && (\r\n            <p className=\"text-[11px] text-slate-500 dark:text-slate-400\">\r\n              {t.detectedLabel}: {result.detected_source_language}\r\n            </p>\r\n          )}\r\n          <p className=\"text-sm leading-6 text-slate-700 dark:text-slate-200\">{result.text}</p>\r\n          {result.note && (\r\n            <p className=\"text-[11px] text-slate-500 dark:text-slate-400\">{result.note}</p>\r\n          )}\r\n        </div>\r\n      )}\r\n    </section>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1672, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lingm/Downloads/Spaceapps%20photo/frontend/src/components/ResourcePanel.tsx"],"sourcesContent":["import TranslationWidget from \"@/components/TranslationWidget\";\r\nimport useTranslations from \"@/hooks/useTranslations\";\r\n\r\nexport function ResourcePanel() {\r\n  const t = useTranslations(\"resourcePanel\");\r\n\r\n  return (\r\n    <section className=\"grid gap-4 rounded-2xl border border-dashed border-slate-300 bg-white/80 p-5 text-sm text-slate-600 shadow-inner dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300\">\r\n      <header className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">\r\n            {t.title}\r\n          </h2>\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n            {t.subtitle}\r\n          </p>\r\n        </div>\r\n        <span className=\"rounded-full bg-slate-200 px-3 py-1 text-xs font-semibold uppercase tracking-wide text-slate-700 dark:bg-slate-800 dark:text-slate-300\">\r\n          {t.statusChip}\r\n        </span>\r\n      </header>\r\n\r\n      <ul className=\"grid gap-2\">\r\n        {t.items.map((item) => (\r\n          <li key={item.title} className=\"rounded-xl border border-slate-200 bg-white p-3 text-xs leading-5 text-slate-600 shadow-sm dark:border-slate-700 dark:bg-slate-950/60 dark:text-slate-300\">\r\n            <strong className=\"font-semibold text-slate-900 dark:text-slate-100\">\r\n              {item.title}\r\n            </strong>\r\n            <div>{item.description}</div>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n\r\n      <TranslationWidget />\r\n\r\n      <div className=\"rounded-xl border border-slate-300 border-dashed bg-white/40 p-3 text-xs text-slate-500 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-400\">\r\n        {t.footer}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default ResourcePanel;\r\n\r\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;;;;;AAEO,SAAS;;IACd,MAAM,IAAI,IAAA,yJAAe,EAAC;IAE1B,qBACE,yMAAC;QAAQ,WAAU;;0BACjB,yMAAC;gBAAO,WAAU;;kCAChB,yMAAC;;0CACC,yMAAC;gCAAG,WAAU;0CACX,EAAE,KAAK;;;;;;0CAEV,yMAAC;gCAAE,WAAU;0CACV,EAAE,QAAQ;;;;;;;;;;;;kCAGf,yMAAC;wBAAK,WAAU;kCACb,EAAE,UAAU;;;;;;;;;;;;0BAIjB,yMAAC;gBAAG,WAAU;0BACX,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC,qBACZ,yMAAC;wBAAoB,WAAU;;0CAC7B,yMAAC;gCAAO,WAAU;0CACf,KAAK,KAAK;;;;;;0CAEb,yMAAC;0CAAK,KAAK,WAAW;;;;;;;uBAJf,KAAK,KAAK;;;;;;;;;;0BASvB,yMAAC,iKAAiB;;;;;0BAElB,yMAAC;gBAAI,WAAU;0BACZ,EAAE,MAAM;;;;;;;;;;;;AAIjB;GArCgB;;QACJ,yJAAe;;;KADX;uCAuCD","debugId":null}},
    {"offset": {"line": 1799, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lingm/Downloads/Spaceapps%20photo/frontend/src/components/SearchPanel.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nimport useTranslations from \"@/hooks/useTranslations\";\r\n\r\nconst LAYER_PRESETS = [\r\n  { key: \"modisTerra\", value: \"MODIS_Terra_CorrectedReflectance_TrueColor\" },\r\n  { key: \"blueMarble\", value: \"BlueMarble_NextGeneration\" },\r\n  { key: \"modisAqua\", value: \"MODIS_Aqua_CorrectedReflectance_TrueColor\" },\r\n];\r\n\r\ntype SearchPanelProps = {\r\n  onPreview: (params: {\r\n    bbox?: [number, number, number, number];\r\n    startDate?: string;\r\n    endDate?: string;\r\n    layer?: string;\r\n  }) => void;\r\n  isLoading?: boolean;\r\n  error?: string | null;\r\n  preview?: {\r\n    layer: string;\r\n    time: string;\r\n    bbox: [number, number, number, number];\r\n    source?: string;\r\n  } | null;\r\n};\r\n\r\nexport function SearchPanel({\r\n  onPreview,\r\n  isLoading = false,\r\n  error,\r\n  preview,\r\n}: SearchPanelProps) {\r\n  const t = useTranslations(\"searchPanel\");\r\n  const [activeMode, setActiveMode] = useState(t.modes[0]?.label ?? \"Coordinates\");\r\n  const [primaryInput, setPrimaryInput] = useState(\"\");\r\n  const [dateStart, setDateStart] = useState(\"\");\r\n  const [dateEnd, setDateEnd] = useState(\"\");\r\n  const [selectedLayer, setSelectedLayer] = useState(LAYER_PRESETS[0]?.value ?? \"\");\r\n\r\n  const handlePreview = () => {\r\n    const bbox = primaryInput\r\n      .split(\",\")\r\n      .map((value) => Number.parseFloat(value.trim()))\r\n      .filter(Number.isFinite);\r\n\r\n    onPreview({\r\n      bbox: bbox.length === 4 ? (bbox as [number, number, number, number]) : undefined,\r\n      startDate: dateStart,\r\n      endDate: dateEnd,\r\n      layer: selectedLayer,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <section className=\"grid gap-5 overflow-hidden rounded-2xl border border-slate-200 bg-white/85 p-6 shadow-lg shadow-slate-200/40 backdrop-blur dark:border-slate-800 dark:bg-slate-900/70 dark:shadow-slate-900/30\">\r\n      <header className=\"flex flex-col gap-3 sm:flex-row sm:flex-wrap sm:items-start sm:justify-between\">\r\n        <div className=\"max-w-full\">\r\n          <h2 className=\"text-lg font-semibold text-slate-900 dark:text-slate-100\">\r\n            {t.title}\r\n          </h2>\r\n          <p className=\"text-sm text-slate-500 dark:text-slate-400\">\r\n            {t.subtitle}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex flex-wrap gap-2\">\r\n          {t.modes.map((mode) => (\r\n            <button\r\n              key={mode.id}\r\n              type=\"button\"\r\n              className={`rounded-full px-3 py-1 text-sm font-medium transition-colors ${\r\n                activeMode === mode.label\r\n                  ? \"bg-blue-600 text-white shadow\"\r\n                  : \"bg-slate-200 text-slate-700 hover:bg-slate-300 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700\"\r\n              }`}\r\n              onClick={() => setActiveMode(mode.label)}\r\n            >\r\n              {mode.label}\r\n            </button>\r\n          ))}\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"grid gap-4\">\r\n        <label className=\"grid w-full min-w-0 gap-1 text-sm\">\r\n          <span className=\"font-medium text-slate-600 dark:text-slate-300\">\r\n            {t.primaryInputLabel}\r\n          </span>\r\n          <input\r\n            className=\"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100\"\r\n            placeholder={\r\n              t.modes.find((mode) => mode.label === activeMode)?.placeholder ?? \"\"\r\n            }\r\n            value={primaryInput}\r\n            onChange={(event) => setPrimaryInput(event.target.value)}\r\n          />\r\n        </label>\r\n\r\n        <label className=\"grid w-full min-w-0 gap-1 text-sm\">\r\n          <span className=\"font-medium text-slate-600 dark:text-slate-300\">\r\n            {t.dateRangeLabel}\r\n          </span>\r\n          <div className=\"grid gap-2 sm:grid-cols-2\">\r\n            <input\r\n              type=\"date\"\r\n              className=\"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 sm:max-w-[200px]\"\r\n              value={dateStart}\r\n              onChange={(event) => setDateStart(event.target.value)}\r\n            />\r\n            <input\r\n              type=\"date\"\r\n              className=\"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100 sm:max-w-[200px]\"\r\n              value={dateEnd}\r\n              onChange={(event) => setDateEnd(event.target.value)}\r\n            />\r\n          </div>\r\n        </label>\r\n\r\n        <label className=\"grid w-full min-w-0 gap-1 text-sm\">\r\n          <span className=\"font-medium text-slate-600 dark:text-slate-300\">\r\n            {t.layerLabel}\r\n          </span>\r\n          <select\r\n            className=\"w-full rounded-xl border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 dark:border-slate-700 dark:bg-slate-900 dark:text-slate-100\"\r\n            value={selectedLayer}\r\n            onChange={(event) => setSelectedLayer(event.target.value)}\r\n          >\r\n            {LAYER_PRESETS.map((layer) => (\r\n              <option key={layer.value} value={layer.value}>\r\n                {t.layers[layer.key] ?? layer.value}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </label>\r\n\r\n        <div className=\"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between\">\r\n          <div className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n            {t.helper}\r\n          </div>\r\n          <button\r\n            type=\"button\"\r\n            className=\"inline-flex items-center gap-2 rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white shadow transition-colors hover:bg-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-200 disabled:cursor-wait disabled:bg-blue-400\"\r\n            onClick={handlePreview}\r\n            disabled={isLoading}\r\n          >\r\n            {isLoading ? t.previewLoading : t.previewButton}\r\n          </button>\r\n        </div>\r\n        {error && (\r\n          <p className=\"rounded-lg border border-red-200 bg-red-50 px-3 py-2 text-xs text-red-700 dark:border-red-900/50 dark:bg-red-900/30 dark:text-red-200\">\r\n            {error}\r\n          </p>\r\n        )}\r\n\r\n        {preview && (\r\n          <div className=\"grid gap-1 rounded-xl border border-slate-200 bg-white/70 p-3 text-xs text-slate-600 shadow-sm dark:border-slate-800 dark:bg-slate-900/60 dark:text-slate-300\">\r\n            <span>\r\n              {t.summary.layer}: {preview.layer}\r\n            </span>\r\n            <span>\r\n              {t.summary.time}: {preview.time}\r\n            </span>\r\n            <span>\r\n              {t.summary.bbox}: {preview.bbox.join(\", \")}\r\n            </span>\r\n            {preview.source && (\r\n              <span>\r\n                {t.summary.source}: {preview.source}\r\n              </span>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default SearchPanel;\r\n\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2134, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lingm/Downloads/Spaceapps%20photo/frontend/src/components/TimelinePlayer.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nimport useTranslations from \"@/hooks/useTranslations\";\r\n\r\nexport function TimelinePlayer() {\r\n  const t = useTranslations(\"timeline\");\r\n  const [activeId, setActiveId] = useState(t.events[0]?.id ?? \"\");\r\n\r\n  return (\r\n    <section className=\"grid gap-4 rounded-2xl border border-slate-200 bg-white/85 p-5 shadow-lg shadow-slate-200/40 backdrop-blur dark:border-slate-800 dark:bg-slate-900/70 dark:shadow-slate-900/30\">\r\n      <header className=\"flex items-center justify-between\">\r\n        <div>\r\n          <h2 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">\r\n            {t.title}\r\n          </h2>\r\n          <p className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n            {t.subtitle}\r\n          </p>\r\n        </div>\r\n        <div className=\"flex gap-2 text-xs text-slate-600 dark:text-slate-300\">\r\n          <button className=\"rounded-lg border border-slate-200 bg-white px-3 py-1 shadow-sm transition-colors hover:bg-slate-100 dark:border-slate-700 dark:bg-slate-950 dark:hover:bg-slate-800\">\r\n            {t.prev}\r\n          </button>\r\n          <button className=\"rounded-lg border border-slate-200 bg-white px-3 py-1 shadow-sm transition-colors hover:bg-slate-100 dark:border-slate-700 dark:bg-slate-950 dark:hover:bg-slate-800\">\r\n            {t.next}\r\n          </button>\r\n        </div>\r\n      </header>\r\n\r\n      <div className=\"grid gap-2\">\r\n        <div className=\"relative h-2 rounded-full bg-slate-200 dark:bg-slate-800\">\r\n          <div\r\n            className=\"absolute h-full rounded-full bg-blue-500\"\r\n            style={{\r\n              width: `${\r\n                (t.events.findIndex((m) => m.id === activeId) /\r\n                  (Math.max(t.events.length - 1, 1))) *\r\n                100\r\n              }%`,\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"flex justify-between text-xs text-slate-400 dark:text-slate-500\">\r\n          <span>{t.progressStart}</span>\r\n          <span>{t.progressEnd}</span>\r\n        </div>\r\n      </div>\r\n\r\n      <ul className=\"grid gap-2\">\r\n        {t.events.map((moment) => {\r\n          const active = moment.id === activeId;\r\n          return (\r\n            <li key={moment.id}>\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setActiveId(moment.id)}\r\n                className={`flex w-full items-center justify-between rounded-xl border px-3 py-2 text-left text-sm transition-colors ${\r\n                  active\r\n                    ? \"border-blue-400 bg-blue-50 text-blue-900 dark:border-blue-400/60 dark:bg-blue-500/10 dark:text-blue-100\"\r\n                    : \"border-slate-200 bg-white text-slate-700 hover:bg-slate-100 dark:border-slate-800 dark:bg-slate-950 dark:text-slate-300 dark:hover:bg-slate-900\"\r\n                }`}\r\n              >\r\n                <span className=\"font-medium\">{moment.label}</span>\r\n                <span className=\"text-xs text-slate-500 dark:text-slate-400\">\r\n                  {new Date(moment.timestamp).toUTCString()}\r\n                </span>\r\n              </button>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n\r\n      <div className=\"rounded-xl border border-dashed border-slate-300 bg-white/40 p-3 text-xs text-slate-500 dark:border-slate-700 dark:bg-slate-900/40 dark:text-slate-400\">\r\n        {t.footnote}\r\n      </div>\r\n    </section>\r\n  );\r\n}\r\n\r\nexport default TimelinePlayer;\r\n\r\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;;;AAJA;;;AAMO,SAAS;QAE2B;;IADzC,MAAM,IAAI,IAAA,yJAAe,EAAC;QACe;IAAzC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,qLAAQ,EAAC,CAAA,iBAAA,aAAA,EAAE,MAAM,CAAC,EAAE,cAAX,iCAAA,WAAa,EAAE,cAAf,2BAAA,gBAAmB;IAE5D,qBACE,yMAAC;QAAQ,WAAU;;0BACjB,yMAAC;gBAAO,WAAU;;kCAChB,yMAAC;;0CACC,yMAAC;gCAAG,WAAU;0CACX,EAAE,KAAK;;;;;;0CAEV,yMAAC;gCAAE,WAAU;0CACV,EAAE,QAAQ;;;;;;;;;;;;kCAGf,yMAAC;wBAAI,WAAU;;0CACb,yMAAC;gCAAO,WAAU;0CACf,EAAE,IAAI;;;;;;0CAET,yMAAC;gCAAO,WAAU;0CACf,EAAE,IAAI;;;;;;;;;;;;;;;;;;0BAKb,yMAAC;gBAAI,WAAU;;kCACb,yMAAC;wBAAI,WAAU;kCACb,cAAA,yMAAC;4BACC,WAAU;4BACV,OAAO;gCACL,OAAO,AAAC,GAIP,OAHC,AAAC,EAAE,MAAM,CAAC,SAAS,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,YACjC,KAAK,GAAG,CAAC,EAAE,MAAM,CAAC,MAAM,GAAG,GAAG,KACjC,KACD;4BACH;;;;;;;;;;;kCAGJ,yMAAC;wBAAI,WAAU;;0CACb,yMAAC;0CAAM,EAAE,aAAa;;;;;;0CACtB,yMAAC;0CAAM,EAAE,WAAW;;;;;;;;;;;;;;;;;;0BAIxB,yMAAC;gBAAG,WAAU;0BACX,EAAE,MAAM,CAAC,GAAG,CAAC,CAAC;oBACb,MAAM,SAAS,OAAO,EAAE,KAAK;oBAC7B,qBACE,yMAAC;kCACC,cAAA,yMAAC;4BACC,MAAK;4BACL,SAAS,IAAM,YAAY,OAAO,EAAE;4BACpC,WAAW,AAAC,4GAIX,OAHC,SACI,4GACA;;8CAGN,yMAAC;oCAAK,WAAU;8CAAe,OAAO,KAAK;;;;;;8CAC3C,yMAAC;oCAAK,WAAU;8CACb,IAAI,KAAK,OAAO,SAAS,EAAE,WAAW;;;;;;;;;;;;uBAZpC,OAAO,EAAE;;;;;gBAiBtB;;;;;;0BAGF,yMAAC;gBAAI,WAAU;0BACZ,EAAE,QAAQ;;;;;;;;;;;;AAInB;GAzEgB;;QACJ,yJAAe;;;KADX;uCA2ED","debugId":null}},
    {"offset": {"line": 2338, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lingm/Downloads/Spaceapps%20photo/frontend/src/hooks/useImageryPreview.ts"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\n\r\nimport type { ImageryPreview } from \"@/types/imagery\";\r\n\r\ntype PreviewRequest = {\r\n  bbox?: [number, number, number, number];\r\n  startDate?: string;\r\n  endDate?: string;\r\n  layer?: string;\r\n};\r\n\r\nexport default function useImageryPreview() {\r\n  const [preview, setPreview] = useState<ImageryPreview | null>(null);\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [availableDates, setAvailableDates] = useState<string[]>([]);\r\n\r\n  const fetchPreview = async (request: PreviewRequest = {}) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    try {\r\n      const layer = request.layer ?? \"MODIS_Terra_CorrectedReflectance_TrueColor\";\r\n      const responseTimeline = await fetch(\r\n        `/api/tiles/timeline?layer=${encodeURIComponent(layer)}&limit=200`,\r\n      );\r\n\r\n      if (responseTimeline.ok) {\r\n        const timeline = (await responseTimeline.json()) as { timestamp: string }[];\r\n        const dates = timeline.map((item) => item.timestamp.slice(0, 10));\r\n        setAvailableDates(dates);\r\n      }\r\n\r\n      const response = await fetch(\"/api/tiles/preview\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({\r\n          bbox: request.bbox,\r\n          width: 800,\r\n          height: 400,\r\n          layer,\r\n          time: request.startDate || request.endDate,\r\n        }),\r\n      });\r\n\r\n      if (!response.ok) {\r\n        const data = await response.json();\r\n        throw new Error(data.detail?.message ?? \"Failed to load imagery preview\");\r\n      }\r\n\r\n      const data = (await response.json()) as ImageryPreview;\r\n      setPreview(data);\r\n    } catch (err) {\r\n      const message = err instanceof Error ? err.message : \"Unknown error\";\r\n      setError(message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return {\r\n    preview,\r\n    isLoading,\r\n    error,\r\n    availableDates,\r\n    fetchPreview,\r\n  };\r\n}\r\n\r\n\r\n"],"names":[],"mappings":";;;;AAEA;;AAFA;;AAae,SAAS;;IACtB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,qLAAQ,EAAwB;IAC9D,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,qLAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,qLAAQ,EAAgB;IAClD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,qLAAQ,EAAW,EAAE;IAEjE,MAAM,eAAe;YAAO,2EAA0B,CAAC;QACrD,aAAa;QACb,SAAS;QAET,IAAI;gBACY;YAAd,MAAM,QAAQ,CAAA,iBAAA,QAAQ,KAAK,cAAb,4BAAA,iBAAiB;YAC/B,MAAM,mBAAmB,MAAM,MAC7B,AAAC,6BAAsD,OAA1B,mBAAmB,QAAO;YAGzD,IAAI,iBAAiB,EAAE,EAAE;gBACvB,MAAM,WAAY,MAAM,iBAAiB,IAAI;gBAC7C,MAAM,QAAQ,SAAS,GAAG,CAAC,CAAC,OAAS,KAAK,SAAS,CAAC,KAAK,CAAC,GAAG;gBAC7D,kBAAkB;YACpB;YAEA,MAAM,WAAW,MAAM,MAAM,sBAAsB;gBACjD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBACnB,MAAM,QAAQ,IAAI;oBAClB,OAAO;oBACP,QAAQ;oBACR;oBACA,MAAM,QAAQ,SAAS,IAAI,QAAQ,OAAO;gBAC5C;YACF;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;oBAEA;gBADhB,MAAM,OAAO,MAAM,SAAS,IAAI;oBAChB;gBAAhB,MAAM,IAAI,MAAM,CAAA,wBAAA,eAAA,KAAK,MAAM,cAAX,mCAAA,aAAa,OAAO,cAApB,kCAAA,uBAAwB;YAC1C;YAEA,MAAM,OAAQ,MAAM,SAAS,IAAI;YACjC,WAAW;QACb,EAAE,OAAO,KAAK;YACZ,MAAM,UAAU,eAAe,QAAQ,IAAI,OAAO,GAAG;YACrD,SAAS;QACX,SAAU;YACR,aAAa;QACf;IACF;IAEA,OAAO;QACL;QACA;QACA;QACA;QACA;IACF;AACF;GAxDwB","debugId":null}},
    {"offset": {"line": 2409, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/lingm/Downloads/Spaceapps%20photo/frontend/src/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport Link from \"next/link\";\nimport { useMemo, useState } from \"react\";\n\nimport DatasetSidebar from \"@/components/DatasetSidebar\";\nimport MapViewport from \"@/components/MapViewport\";\nimport { AnnotationPanel } from \"@/components/annotation\";\nimport ResourcePanel from \"@/components/ResourcePanel\";\nimport SearchPanel from \"@/components/SearchPanel\";\nimport TimelinePlayer from \"@/components/TimelinePlayer\";\nimport TranslationWidget from \"@/components/TranslationWidget\";\nimport { DATASET_LOOKUP, DATASETS } from \"@/data/datasets\";\nimport type { Annotation } from \"@/types/annotation\";\nimport useTranslations from \"@/hooks/useTranslations\";\nimport useImageryPreview from \"@/hooks/useImageryPreview\";\n\ntype WorkspaceView = \"explore\" | \"insights\" | \"annotate\" | \"translate\";\ntype FeatureTab = { id: WorkspaceView; label: string; description: string };\n\nconst FEATURE_TABS: FeatureTab[] = [\n  { id: \"explore\", label: \"Explore\", description: \"Browse the space imagery catalog and switch datasets.\" },\n  {\n    id: \"insights\",\n    label: \"Insights\",\n    description: \"Review timelines, mission updates, and contextual resources in one place.\",\n  },\n  {\n    id: \"annotate\",\n    label: \"Annotate\",\n    description: \"Capture notes, tag coordinates, and collaborate on observations.\",\n  },\n  {\n    id: \"translate\",\n    label: \"Translate\",\n    description: \"Localise mission content or field notes with integrated translation tools.\",\n  },\n];\n\nexport default function Home() {\n  const { preview, isLoading, fetchPreview, error, availableDates } = useImageryPreview();\n  const hero = useTranslations(\"hero\");\n  const backend = useTranslations(\"backendSection\");\n\n  const [selectedDatasetId, setSelectedDatasetId] = useState<string>(DATASETS[0]?.id ?? \"earth-true-color\");\n  const [annotations, setAnnotations] = useState<Annotation[]>([]);\n  const [activeView, setActiveView] = useState<WorkspaceView>(\"explore\");\n\n  const selectedDataset = DATASET_LOOKUP.get(selectedDatasetId);\n\n  const handleNewAnnotation = (annotation: Annotation) => {\n    setAnnotations((prev) => [annotation, ...prev]);\n  };\n\n  const heroContent = (\n    <section className=\"flex flex-col gap-5 rounded-2xl border border-slate-200/80 bg-white/75 p-5 shadow-sm shadow-slate-200/50 backdrop-blur-sm dark:border-slate-800/70 dark:bg-slate-900/70 dark:shadow-slate-900/50\">\n      <div className=\"flex flex-col gap-5 lg:flex-row lg:items-center lg:justify-between\">\n        <div className=\"space-y-3\">\n          <p className=\"text-[10px] uppercase tracking-[0.42em] text-slate-500 dark:text-slate-400\">\n            {hero.badge}\n          </p>\n          <h1 className=\"text-3xl font-semibold leading-tight text-slate-900 dark:text-slate-50 md:text-[36px]\">\n            {hero.title}\n          </h1>\n          <p className=\"max-w-3xl text-sm text-slate-600 dark:text-slate-300\">{hero.description}</p>\n          <div className=\"flex flex-wrap gap-2 text-[10px] uppercase tracking-[0.2em] text-slate-500 dark:text-slate-400\">\n            {hero.tags.map((tag) => (\n              <span key={tag} className=\"rounded-full border border-slate-200 px-3 py-1 dark:border-slate-700\">\n                {tag}\n              </span>\n            ))}\n          </div>\n        </div>\n        <section className=\"flex max-w-sm flex-col gap-3 rounded-2xl border border-slate-200/80 bg-white/70 p-4 text-sm text-slate-600 shadow-inner dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300\">\n          <h2 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">{backend.title}</h2>\n          <p>{backend.description}</p>\n          <Link\n            href=\"/docs/architecture\"\n            className=\"inline-flex items-center gap-1 text-sm font-semibold text-blue-600 hover:underline\"\n          >\n            {backend.linkText}\n          </Link>\n        </section>\n      </div>\n    </section>\n  );\n\n  const workspaceModesCard = (\n    <section className=\"flex h-full flex-col gap-3 rounded-2xl border border-slate-200/80 bg-white/75 p-4 shadow-sm shadow-slate-200/40 backdrop-blur-sm dark:border-slate-800/70 dark:bg-slate-900/70 dark:shadow-slate-900/40\">\n      <header className=\"space-y-1\">\n        <h2 className=\"text-base font-semibold text-slate-900 dark:text-slate-100\">Workspace Modes</h2>\n        <p className=\"text-[11px] leading-relaxed text-slate-500 dark:text-slate-400\">\n          Switch between the key toolsets you need for each workflow.\n        </p>\n      </header>\n      <div className=\"grid gap-2 md:grid-cols-2\">\n        {FEATURE_TABS.map((tab) => {\n          const active = activeView === tab.id;\n          return (\n            <button\n              key={tab.id}\n              type=\"button\"\n              onClick={() => setActiveView(tab.id)}\n              className={`group flex flex-col gap-1.5 rounded-xl border px-3.5 py-3 text-left transition-all ${\n                active\n                  ? \"border-blue-500 bg-gradient-to-br from-blue-600/15 via-blue-500/10 to-blue-600/5 text-blue-600 shadow-md shadow-blue-500/20 dark:text-blue-200\"\n                  : \"border-slate-200 bg-white/70 text-slate-600 hover:border-blue-300 hover:text-blue-500 dark:border-slate-700 dark:bg-slate-900/60 dark:text-slate-300\"\n              }`}\n            >\n              <span className=\"text-sm font-semibold\">{tab.label}</span>\n              <span className=\"text-[11px] leading-snug text-slate-500 transition-colors group-hover:text-inherit dark:text-slate-400\">\n                {tab.description}\n              </span>\n            </button>\n          );\n        })}\n      </div>\n    </section>\n  );\n\n  const mapViewport = useMemo(\n    () => (\n      <MapViewport\n        datasetId={selectedDatasetId}\n        previewUrl={preview?.image}\n        layerName={preview?.layer}\n        timestamp={preview?.time}\n        metadata={preview ? preview.bbox.join(\", \") : undefined}\n        attribution={preview?.attribution}\n        onDatasetChange={(dataset) => {\n          if (dataset.supportsTime && dataset.defaultDate) {\n            // Hook for future enhancements\n          }\n        }}\n        className=\"min-h-[60vh] xl:min-h-[66vh] 2xl:min-h-[70vh]\"\n        availableDates={availableDates}\n        onDateChange={(date) => {\n          if (preview && date) {\n            fetchPreview({ layer: preview.layer, startDate: date });\n          }\n        }}\n      />\n    ),\n    [availableDates, fetchPreview, preview, selectedDatasetId],\n  );\n\n  const sidebarContent = useMemo(() => {\n    switch (activeView) {\n      case \"insights\":\n        return (\n          <>\n            <TimelinePlayer />\n            <ResourcePanel />\n          </>\n        );\n      case \"annotate\":\n        return (\n          <>\n            <AnnotationPanel dataset={selectedDataset} annotations={annotations} onAdd={handleNewAnnotation} />\n            <ResourcePanel />\n          </>\n        );\n      case \"translate\":\n        return (\n          <>\n            <TranslationWidget />\n            <ResourcePanel />\n          </>\n        );\n      case \"explore\":\n      default:\n        return (\n          <>\n            <SearchPanel onPreview={fetchPreview} isLoading={isLoading} error={error} preview={preview} />\n            <DatasetSidebar\n              selectedId={selectedDatasetId}\n              onSelect={setSelectedDatasetId}\n              className=\"self-start max-h-[420px]\"\n              height=\"lg:max-h-[420px] xl:max-h-[460px]\"\n            />\n          </>\n        );\n    }\n  }, [activeView, annotations, error, fetchPreview, handleNewAnnotation, isLoading, preview, selectedDataset, selectedDatasetId]);\n\n  const mobileDatasetSidebar = activeView === \"explore\"\n    ? (\n        <DatasetSidebar selectedId={selectedDatasetId} onSelect={setSelectedDatasetId} className=\"lg:hidden\" />\n      )\n    : null;\n\n  return (\n    <div className=\"min-h-screen bg-slate-50 text-slate-900 dark:bg-slate-950 dark:text-slate-100\">\n      <div className=\"mx-auto flex min-h-screen w-full max-w-[1920px] flex-col gap-6 px-6 pb-10 pt-6 sm:px-8 lg:px-10 xl:px-14\">\n        <header className=\"grid gap-4 xl:grid-cols-[minmax(0,1.6fr)_minmax(320px,1fr)] xl:items-stretch\">\n          {heroContent}\n          {workspaceModesCard}\n        </header>\n\n        <main className=\"grid flex-1 gap-4 xl:grid-cols-[minmax(320px,360px)_minmax(0,1fr)] 2xl:grid-cols-[minmax(360px,400px)_minmax(0,1fr)] 2xl:gap-6\">\n          <section className=\"flex min-h-[520px] flex-col gap-4 overflow-visible xl:min-h-[640px] 2xl:min-h-[720px]\">\n            {sidebarContent}\n          </section>\n          <section className=\"flex min-h-[520px] flex-col xl:min-h-[640px] 2xl:min-h-[720px]\">\n            {mapViewport}\n          </section>\n        </main>\n\n        {mobileDatasetSidebar}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}